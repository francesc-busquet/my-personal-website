[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Francesc Busquet",
    "section": "",
    "text": "Data-Driven Market Intelligence\nEmpowering Organizations for Competitive Edge\nI am a technophile and data enthusiast, passionate about harnessing the potential of data to analyze competitive landscapes and derive strategic market insights, which provide actionable guidance, ultimately empowering organizations to gain a competitive advantage. Equally important to me is the art of effectively communicating these insights, no matter how intricate they may be.\nI possess 7 years of academic research experience, during which I explored how to leverage state-of-the-art data-driven methods to gain a deeper understanding of consumers and markets. Throughout this period, I have also assumed leadership roles and actively contributed to several multifaceted industry consultancy endeavors, primarily in the finance and tech sectors, in which I helped organizations enhance their understanding of consumer purchasing behavior and the complex dynamics that shape their markets."
  },
  {
    "objectID": "index.html#fran",
    "href": "index.html#fran",
    "title": "Francesc Busquet",
    "section": "",
    "text": "Data-Driven Market Intelligence\nEmpowering Organizations for Competitive Edge"
  },
  {
    "objectID": "posts.html",
    "href": "posts.html",
    "title": "Posts",
    "section": "",
    "text": "Date\n\n\nTitle\n\n\n\n\n\n\nDec 28, 2021\n\n\nStatistics Foundations: Sampling error\n\n\n\n\nSep 25, 2021\n\n\nStatistics Foundations: Populations and Samples\n\n\n\n\nMay 19, 2021\n\n\nWhy potential inflation could lead to a financial crisis?\n\n\n\n\n\n\nNo matching items\n\n Back to top"
  },
  {
    "objectID": "posts/2021-09-25-statistics-foundations-population-and-sample/index.html",
    "href": "posts/2021-09-25-statistics-foundations-population-and-sample/index.html",
    "title": "Statistics Foundations: Populations and Samples",
    "section": "",
    "text": "Statistics enables us to distill valuable insights from unstructured information, commonly referred to as data. This acquired knowledge empowers us to develop a deeper comprehension of the subject matter at hand, facilitating the exploration of questions that span a wide spectrum, such as:\n\nWhat is the profile of our customer base?\nDo our Swiss consumers exhibit a higher average expenditure compared to their Norwegian counterparts?\nDoes consistent alcohol consumption correlate with an elevated risk of experiencing a heart attack?\n“What magnitude of sales increase can I anticipate for the upcoming year with a 20% boost in advertising expenditure?"
  },
  {
    "objectID": "posts/2021-09-25-statistics-foundations-population-and-sample/index.html#the-power-of-statistics",
    "href": "posts/2021-09-25-statistics-foundations-population-and-sample/index.html#the-power-of-statistics",
    "title": "Statistics Foundations: Populations and Samples",
    "section": "",
    "text": "Statistics enables us to distill valuable insights from unstructured information, commonly referred to as data. This acquired knowledge empowers us to develop a deeper comprehension of the subject matter at hand, facilitating the exploration of questions that span a wide spectrum, such as:\n\nWhat is the profile of our customer base?\nDo our Swiss consumers exhibit a higher average expenditure compared to their Norwegian counterparts?\nDoes consistent alcohol consumption correlate with an elevated risk of experiencing a heart attack?\n“What magnitude of sales increase can I anticipate for the upcoming year with a 20% boost in advertising expenditure?"
  },
  {
    "objectID": "posts/2021-09-25-statistics-foundations-population-and-sample/index.html#the-ideal-of-population-and-the-reality-of-sampling",
    "href": "posts/2021-09-25-statistics-foundations-population-and-sample/index.html#the-ideal-of-population-and-the-reality-of-sampling",
    "title": "Statistics Foundations: Populations and Samples",
    "section": "The Ideal of Population and the Reality of Sampling",
    "text": "The Ideal of Population and the Reality of Sampling\nTo comprehensively explore and enhance our understanding of a given issue, it is ideal to possess data pertaining to all entities impacted by that issue. For instance, in our pursuit of gaining deeper insights into our customer base, the ideal scenario involves having access to data for every single one of our customers. In this comprehensive dataset, we would find detailed information regarding each customer’s age, income, purchasing history, and other relevant attributes. Such a dataset would empower us to attain a holistic understanding of our customer base’s profile. In statistical terms, when we allude to data encompassing all entities affected by the issue of interest, we are referring to the population. Naturally, this population is contingent upon the specific focus of interest. For instance, if our objective shifted from understanding the profile of our overall customer base to that of our Swiss customers specifically, our population would comprise solely our Swiss customer subset.\nNevertheless, acquiring data for every single entity influenced by the matter of interest may often prove to be impractical, primarily due to the substantial expenses associated with such an undertaking or its constantly changing nature. Therefore, in the field of statistics, we operate with subsets derived from this population. Ideally, these subsets are constructed in such a way that each entity within them has an equal probability of being selected. Consequently, the resultant subset, known as a sample, is smaller in scale and serves as a reliable and representative image of the broader population. The fundamental concept underlying this approach is that through the observation and analysis of this sample, we can draw meaningful conclusions about the entire population, a process known as inference.\n\nLimitations and Potential Bias in Sampling\nNonetheless, utilizing samples entails operating with an imperfect representation of the population—a mere approximation that may deviate from the true population characteristics. Even when each individual possesses an equal probability of selection, the random nature of the process can result in the overrepresentation or underrepresentation of certain specific types or groups of entities within our sample, thereby potentially leading to skewed findings and conclusions."
  },
  {
    "objectID": "posts/2021-09-25-statistics-foundations-population-and-sample/index.html#sampling-in-practice-exploring-our-consumer-base-annual-income",
    "href": "posts/2021-09-25-statistics-foundations-population-and-sample/index.html#sampling-in-practice-exploring-our-consumer-base-annual-income",
    "title": "Statistics Foundations: Populations and Samples",
    "section": "Sampling in Practice: Exploring Our Consumer Base Annual Income",
    "text": "Sampling in Practice: Exploring Our Consumer Base Annual Income\nTo illustrate these concepts, let’s delve into an example using a dataset from Kaggle. This dataset comprises data about 2,000 supermarket customers, encompassing a range of characteristics such as age, annual income, and education level. For the sake of this demonstration, let’s envision that this dataset encapsulates information about every single one of our customers, effectively serving as a representation of our customer population. Now, let’s suppose our objective is to gain a more profound insight into the annual income distribution among our customers.\n\nAnnual Income Distribution for Our Population\nHence, we can promptly delve into the examination of the data distribution, which we can observe through a histogram, depicted in Figure 1. This analysis unveils that the distribution of customer incomes exhibits an approximate normality, featuring an average annual income of $120,950 with a moderate degree of variability (Standard Deviation = $38,110). This implies that a substantial proportion of customers have incomes that closely align with the mean value, while fewer customers fall within the income extremes. Additionally, it is worth noting a slight rightward skew in the plot, indicating a minority of individuals with substantially higher incomes compared to the majority.\n\n\n\n\n\nFigure 1: Customer annual income distribution (thousands, $)\n\n\n\n\n\n\n“Collecting” a Small Customer Sample and Exploring their Annual Income\nHaving briefly explored the distribution of our customers’ annual income population, we must acknowledge the practical challenge of obtaining data from the entire population. Therefore, we opt to acquire a representative sample, a feasible alternative. In this scenario, we decided to select an easily obtainable sample of 20 customers, each having an equal probability of being included in the sample. Following the acquisition of this sample, we analyze their annual income distribution, which can be observed in Figure 2, revealing several noteworthy disparities.\nFirstly, we observe that certain income brackets, present in the population data, remain absent in our sample. Additionally, we notice a higher proportion of high-income customers in comparison to the population. These disparities culminate in a higher average customer annual income (Mean = $137,320) and increased variability (Standard Deviation = $47,770) within the sample. Consequently, if we were to draw inferences based on this data, our conclusions would suggest that individuals in the sample exhibit a higher average income and greater income variability compared to the population, thus drawing into error.\n\n\n\n\n\nFigure 2: Customer annual income distribution for our sample with 20 observations (thousands, $)\n\n\n\n\nDespite these disparities, our sample offers us an initial glimpse into the broader income distribution of the entire population. While our sample may not perfectly mirror the population due to its size and inherent limitations, it serves as a foundational reference point for comprehending income patterns within the larger group. It grants us a preliminary understanding of the income ranges, tendencies, and variations we can anticipate when considering the overall population’s income distribution. However, it’s essential to acknowledge the presence of these disparities and recognize that they may impact the conclusions we can draw regarding the population.\n\n\nCapturing Nuances Better with Increased Sample Size\nThese observed disparities are unsurprising, given the inherent limitations of capturing the intricacies of our data with a small sample of just 20 consumers. Consequently, we observe the absence of individuals in various income brackets and a skewed composition compared to our population (which, in this hypothetical case, we have knowledge of, but in practice, we might not).\nOne might naturally question whether increasing the sample size could enhance the richness of our sample and consequently enable us to better capture the nuances present in the population. This would ultimately result in a more faithful representation. To investigate this, we will generate samples of varying sizes, specifically seven additional samples consisting of 40, 80, 120, 150, 300, 500, and 1000 randomly selected consumers from our population. Figure 3 visually illustrates, through histograms, how the distribution changes for each of these sample sizes, including the initially created one with 20 consumers.\n\n\n\n\n\nFigure 3: Customer annual income distribution for varying sample sizes (thousands, $)\n\n\n\n\nIn this Figure, we can discern that larger sample sizes excel in capturing the subtleties inherent in the population’s data distribution. Notably, the distribution of bigger samples closely mirrors that of the population, with fewer missing income ranges and diminished disparities.\nWhen we work with larger samples, we effectively broaden our scope of observation, incorporating a more diverse range of data points. This expanded sample size minimizes the influence of random variation and offers a more robust representation of the population. In essence, larger samples provide a more comprehensive cross-section of the population, enhancing our ability to accurately capture the underlying patterns, variations, and nuances present in the data.\nNow, you might be wondering: what constitutes the ideal sample size? There is not a one-size-fits-all answer; instead, the sample size should strike a balance. It must be large enough to capture the nuances of the population while still being feasible to acquire within budget and time constraints. It is crucial to recognize that a sample will inherently exhibit differences from the population, a fundamental aspect of statistical analysis."
  },
  {
    "objectID": "posts/2021-09-25-statistics-foundations-population-and-sample/index.html#summary",
    "href": "posts/2021-09-25-statistics-foundations-population-and-sample/index.html#summary",
    "title": "Statistics Foundations: Populations and Samples",
    "section": "Summary",
    "text": "Summary\n\nStatistics empowers us to glean valuable insights from data, enriching our comprehension of issues of interest.\nIdeally, a complete understanding of any issue necessitates data from every entity involved, referred to as the population.\nPractical constraints often require us to work with smaller, representative subsets, known as samples, where each entity in the population has an equal chance of inclusion.\nSamples, while essential for making inferences about the population, have inherent limitations due to their size, as they can’t fully capture the population’s intricacies, introducing errors into our inferences.\nLarger samples excel at capturing population nuances, offering a more faithful representation of its characteristics.\n\n\n\nCode\n# Load necessary libraries\nlibrary(tidyverse)\nlibrary(ggthemes)\nlibrary(gganimate)\nlibrary(scales)\n\n# Read customer data from CSV file and adjust income values\ncustomer_data &lt;- read.csv(\"assets/customer.csv\")\ncustomer_data$Income &lt;- customer_data$Income / 1000\n\n# Calculate the average and standard deviation of the income for the entire population\naverage_income_population &lt;- mean(customer_data$Income)\nstd_deviation_population &lt;- sd(customer_data$Income)\n\n# Create and display a histogram for the entire population's income distribution\nggplot(customer_data, aes(x = Income)) +\n  geom_histogram(aes(y = after_stat(count / sum(count) * 100)), fill = \"steelblue\") +\n  labs(\n    x = \"Annual Income (thousands, $)\",\n    y = \"Frequency\"\n  ) +\n  theme_fivethirtyeight() +\n  theme(plot.title = element_text(hjust = 0),\n    axis.title.x = element_text(hjust = 0.5),\n    axis.title.y = element_text(hjust = 0.5),\n    plot.caption = element_text(hjust = 0)) +\n  scale_y_continuous(labels = percent_format(scale = 1)) +\n  annotate(\"text\", x = max(customer_data$Income, na.rm = TRUE) * 0.95, y = 12, \n           label = paste0(\"Mean: \", round(average_income_population, 2), \"\\nSD: \", round(std_deviation_population, 2))) \n\n# Set a random seed for reproducibility\nset.seed(150)\n\n# Create a random sample of 20 observations from the population\ncustomer_data_sample &lt;- customer_data[sample(nrow(customer_data), 20), ]\n\n# Calculate the average and standard deviation of the income for the sample\naverage_income_sample &lt;- mean(customer_data_sample$Income)\nstd_deviation_sample &lt;- sd(customer_data_sample$Income)\n\n# Create and display a histogram for the sample's income distribution\nggplot(customer_data_sample, aes(x = Income)) +\n  geom_histogram(aes(y = after_stat(count / sum(count) * 100)), fill = \"steelblue\") +\n  labs(\n    x = \"Annual Income (thousands, $)\",\n    y = \"Frequency\"\n  ) +\n  theme_fivethirtyeight() +\n  theme(plot.title = element_text(hjust = 0),\n    axis.title.x = element_text(hjust = 0.5),\n    axis.title.y = element_text(hjust = 0.5),\n    plot.caption = element_text(hjust = 0)) +\n  scale_y_continuous(labels = percent_format(scale = 1)) +\n  annotate(\"text\", x = max(customer_data_sample$Income, na.rm = TRUE) * 0.95, y = 13, \n           label = paste0(\"Mean: \", round(average_income_sample, 2), \"\\nSD: \", round(std_deviation_sample, 2))) \n\n\n\n\n\n## Create samples of different sizes and create animation with their distribution\n\n# Create an empty data frame to store the samples and add a column for observations\ncustomer_data_samples &lt;- data.frame()\ncustomer_data_samples$Observations &lt;- character(0)\n\n# Define the sample sizes\nsample_sizes &lt;- c(20, 40, 80, 120, 150, 300, 500, 1000)\n\n# Set a random seed for reproducibility\nset.seed(350)\n\n# Loop through each sample size\nfor (sample_size in sample_sizes) {\n  # Create a random sample of the specified size\n  customer_data_sample &lt;- customer_data[sample(nrow(customer_data), sample_size), ]\n  \n  # Create a label for the observations indicating the sample size\n  customer_data_sample$Observations &lt;- paste0(sample_size, \" Observations\")\n  \n  # Append the sample to the data frame\n  customer_data_samples &lt;- rbind(customer_data_samples, customer_data_sample)\n}\n\n# Add a label for the population\ncustomer_data$Observations &lt;- \"Population\"\n\n# Append the population data to the data frame\ncustomer_data_samples &lt;- rbind(customer_data_samples, customer_data)\n\n# Convert the \"Observations\" column to a factor with custom labels\ncustomer_data_samples$Observations &lt;- factor(\n  customer_data_samples$Observations,\n  levels = c(\"20 Observations\", \"40 Observations\", \"80 Observations\", \"120 Observations\", \"150 Observations\", \"300 Observations\", \"500 Observations\", \"1000 Observations\", \"Population\")\n)\n\n# Loop through the levels of the \"Observations\" factor and update labels\nfor (i in seq_along(levels(customer_data_samples$Observations))) {\n  sample_type &lt;- levels(customer_data_samples$Observations)[i]\n  subset &lt;- customer_data_samples[customer_data_samples$Observations == sample_type, \"Income\"]\n  average_income &lt;- round(mean(subset), 2)\n  std_deviation_income &lt;- round(sd(subset), 2)\n  \n  # Update labels with mean and standard deviation information\n  if (i &lt;= 8) {\n    levels(customer_data_samples$Observations)[i] &lt;- paste(\n      levels(customer_data_samples$Observations)[i],\n      \"Sample\\n(M = \", average_income, \", SD = \", std_deviation_income, \")\"\n    )\n  } else {\n    levels(customer_data_samples$Observations)[i] &lt;- paste(\n      \"Population\\n(M = \", average_income, \", SD = \", std_deviation_income, \")\"\n    )\n  }\n}\n\n#Create and animate the plot\np &lt;- ggplot(customer_data_samples, aes(x = Income, fill = Observations)) +\n  geom_histogram(aes(y = after_stat(density*width))) +\n  labs(\n    title = \"Annual Income Distribution\",\n    x = \"Annual Income (thousands, $)\",\n    y = \"Frequency\"\n  ) +\n  theme_fivethirtyeight() +\n  scale_fill_economist() +\n  scale_y_continuous(labels = percent_format()) +\n  theme(plot.title = element_text(hjust = 0.95, size = 11),\n    axis.title.x = element_text(hjust = 0.5),\n    axis.title.y = element_text(hjust = 0.5),\n    plot.caption = element_text(hjust = 0), legend.position=\"none\") +\n  transition_states(Observations, transition_length = 1, state_length = 2) +\n  enter_fade() +\n  exit_fade() \n\np &lt;- p + labs(title = \"{closest_state}\")\n\n# Render the animation\nanim &lt;- animate(p, nframes = 150, duration = 15)\nanim"
  },
  {
    "objectID": "posts/2021-05-19-why-potential-inflation-could-lead-to-a-financial-crisis/index.html",
    "href": "posts/2021-05-19-why-potential-inflation-could-lead-to-a-financial-crisis/index.html",
    "title": "Why potential inflation could lead to a financial crisis?",
    "section": "",
    "text": "The decade of the 2000s may have been a pretty good decade in many aspects, movies such as the lord of the rings or harry potter were released; music albums such as The Strokes’ “Is this It” or Bob Dylan’s “Modern Times” were released. Nevertheless, this decade was not a good one in economic terms. This decade started with the dotcom crash, which was triggered by the rise and fall of technology stocks. And, this was not the only remarkable economic event of this decade, when the economy seemed to have recovered from this crisis, another crisis broke out, the financial crisis of 2007-2008, triggered by the collapse of the housing market in the U.S. All these economic turbulences can be clearly seen in the evolution of the S&P500 between 2000 and 2010 as shown in Figure 1.\n\n\n\nFigure 1. S&P500 (2000 - 2010)"
  },
  {
    "objectID": "posts/2021-05-19-why-potential-inflation-could-lead-to-a-financial-crisis/index.html#a-bit-of-history",
    "href": "posts/2021-05-19-why-potential-inflation-could-lead-to-a-financial-crisis/index.html#a-bit-of-history",
    "title": "Why potential inflation could lead to a financial crisis?",
    "section": "",
    "text": "The decade of the 2000s may have been a pretty good decade in many aspects, movies such as the lord of the rings or harry potter were released; music albums such as The Strokes’ “Is this It” or Bob Dylan’s “Modern Times” were released. Nevertheless, this decade was not a good one in economic terms. This decade started with the dotcom crash, which was triggered by the rise and fall of technology stocks. And, this was not the only remarkable economic event of this decade, when the economy seemed to have recovered from this crisis, another crisis broke out, the financial crisis of 2007-2008, triggered by the collapse of the housing market in the U.S. All these economic turbulences can be clearly seen in the evolution of the S&P500 between 2000 and 2010 as shown in Figure 1.\n\n\n\nFigure 1. S&P500 (2000 - 2010)"
  },
  {
    "objectID": "posts/2021-05-19-why-potential-inflation-could-lead-to-a-financial-crisis/index.html#a-time-of-low-interest-rates",
    "href": "posts/2021-05-19-why-potential-inflation-could-lead-to-a-financial-crisis/index.html#a-time-of-low-interest-rates",
    "title": "Why potential inflation could lead to a financial crisis?",
    "section": "A time of low interest rates",
    "text": "A time of low interest rates\nMoreover, these economic disturbances led governments to act severely. Keynesian policies for the activation of the economy began to play a fundamental role. To encourage consumption, interest rates were lowered to near historic lows. Figure 2 displays the US 10 year note bond yield between 1920 and 2020. In this figure, we can see how the dotcom crash pushed down this yield. However, after that it started recovering until July 2007, when the financial crisis started, after that, that yield continued a downward trend.\n\n\n\nFigure 2. US 10 Year Note Bond Yield"
  },
  {
    "objectID": "posts/2021-05-19-why-potential-inflation-could-lead-to-a-financial-crisis/index.html#stocks-as-the-only-attractive-investment-vehicle",
    "href": "posts/2021-05-19-why-potential-inflation-could-lead-to-a-financial-crisis/index.html#stocks-as-the-only-attractive-investment-vehicle",
    "title": "Why potential inflation could lead to a financial crisis?",
    "section": "Stocks as the only attractive investment vehicle",
    "text": "Stocks as the only attractive investment vehicle\nSuch a long period of low interest rates inflated stock prices. Figure 3, shows how cyclically adjusted S&P 500 price-to-earnings ratio has been rising during the last decade, being quite high in comparison to other periods of time (specially before the dot-com bubble). Stock prices started trading at a premium, because there were no attractive alternative investments, this channelled much of the liquidity into equities (bonds with almost no interest or even negative interests were not an attractive investment anymore). Moreover, this low interest rate setting has prompted greater investor leverage, due to its low cost. Hence, low interest rates justify high stock prices, since stocks are highly attractive relative to bonds and debt is stimulated due to its reduced cost.\n\n\n\nFigure 3. Cyclically adjusted S&P 500 price-to-earnings rations"
  },
  {
    "objectID": "posts/2021-05-19-why-potential-inflation-could-lead-to-a-financial-crisis/index.html#an-unexpected-event-a-global-pandemic",
    "href": "posts/2021-05-19-why-potential-inflation-could-lead-to-a-financial-crisis/index.html#an-unexpected-event-a-global-pandemic",
    "title": "Why potential inflation could lead to a financial crisis?",
    "section": "An unexpected event: A global pandemic",
    "text": "An unexpected event: A global pandemic\n2020 was not a good year, this year will always be remembered as the year of the COVID. COVID brought many changes in our lives, which undoubtedly had an impact on the economy. As a result, governments continued to pursue stimulative policies and interest rates remained at very low levels.\nOne of the best illustrations of those stimulative policies is the amount of dollars printed in 2020: 21% of the United States dollar was printed in 2020, as shown in Figure 4. This large injection was used for both direct and indirect assistance in the COVID situation. This, at the same time, indirectly channelled part of this aid to the financial markets, increasing their value.\n\n\n\nFigure 4. Annual Money Stock Growth (Trillions of USD)"
  },
  {
    "objectID": "posts/2021-05-19-why-potential-inflation-could-lead-to-a-financial-crisis/index.html#a-double-edged-sword",
    "href": "posts/2021-05-19-why-potential-inflation-could-lead-to-a-financial-crisis/index.html#a-double-edged-sword",
    "title": "Why potential inflation could lead to a financial crisis?",
    "section": "A double-edged sword",
    "text": "A double-edged sword\nInjecting money to the economy is always something controversial. Through the law of supply and demand it is easy to infer that a considerable increase in supply (without a similar increase in demand) will reduce the price of a good. In money, when this happens, we say that the money loses value, i.e. one monetary unit can acquire fewer products. In other words, this is what we call inflation. Even Warren Buffet has shown concern for inflation in the past month:\n\n“We are seeing very substantial inflation […] We are raising prices. People are raising prices to us and it’s being accepted.”\n\nThis raise on prices can be already tracked on several indices such as Bloomberg’s agriculture index, shown in Figure 5 and also in the annual single-family home price, as shown in Figure 6 (Figure 6 Source).\n\n\n\nFigure 5. Bloomberg agriculture index\n\n\n\n\n\nFigure 6. Annual Single-family home price\n\n\nThe appearance of inflation means that interest rates should rise. Something that was already pointed by Janet Yellen at the start of this month:\n\n“It may be that interest rates will have to rise somewhat to make sure that our economy doesn’t overheat”\n\nBut what would happen if inflation persists and interest rates have to be risen? Remember that I previously said that stocks are trading at a premium due to the lack of attractive alternative investments. This would no longer be true and this premium would no longer be a thing. In addition, an increase in interest rates would reduce the attractiveness of leverage, thereby encouraging investor’s deleverage. And, thus, we should expect a decrease in the stock price."
  },
  {
    "objectID": "posts/2021-05-19-why-potential-inflation-could-lead-to-a-financial-crisis/index.html#the-market-can-not-be-timed",
    "href": "posts/2021-05-19-why-potential-inflation-could-lead-to-a-financial-crisis/index.html#the-market-can-not-be-timed",
    "title": "Why potential inflation could lead to a financial crisis?",
    "section": "The market can not be timed",
    "text": "The market can not be timed\nEven with all these indicators, it is difficult to say whether this will happen in the short to medium term. There are many factors which could deter inflation away and interest rates low. As an example, Berkshire Hathaway has been stacking cash during the last years, as shown in Figure 7, playing a slightly more defensive position. This may be due the fact that they already saw that low interest rates during the last decade were driving the stock market at high prices. However, interest rates are still low and during that time the stock market has continued rising.\n\n\n\nFigure 7. Berkshire’s Cash Holdings"
  },
  {
    "objectID": "posts/2021-05-19-why-potential-inflation-could-lead-to-a-financial-crisis/index.html#summary",
    "href": "posts/2021-05-19-why-potential-inflation-could-lead-to-a-financial-crisis/index.html#summary",
    "title": "Why potential inflation could lead to a financial crisis?",
    "section": "Summary",
    "text": "Summary\n\nThe first decade of the 2000s was characterized by two economic crisis, which defined an economy with very low interest rates\nLow interest rates increased stock market prices, since there were no attractive alternative investments and leverage was cheap. Thus, stock markets traded at a premium.\nThe Covid crisis led to a massive injection of money into the economy.\nThis money injection is a double-edged sword which may have brought an exuberance illusion awakening a ghost that has been dormant in recent years, inflation.\nThe emergence of inflation would imply an increase in interest rates.\nAn increase in interest rates would mean that the premium paid for stocks would be lost.\nDespite all these facts, timing the market is no easy task. And thus, other factors could keep inflation away and interest rates away, prolonging this situation."
  },
  {
    "objectID": "posts/2021-12-28-statistics-foundations-sample-error/index.html",
    "href": "posts/2021-12-28-statistics-foundations-sample-error/index.html",
    "title": "Statistics Foundations: Sampling error",
    "section": "",
    "text": "In our previous post on the Statistics Foundations series, we highlighted the potency of statistics as a valuable tool for further understanding issues of interest through data. To do so, we would ideally want to study the whole population, which represents the complete collection of entities affected by the issue under investigation. However, in most cases, obtaining data for every entity within this population is simply unfeasible due to constraints such as cost and logistics or even impossible. Consequently, we employ a strategy of working with samples—subsets of this population that are randomly selected in a manner ensuring that every entity has an equal probability of being selected.\nThese samples, though more manageable in size, serve as our window into the broader population, enabling us to draw conclusions and glean insights about the population—a process known as inference. However, it’s important to acknowledge that working with samples introduces a critical challenge: the inherent limitations stemming from their smaller size in comparison to the population. As a consequence, we inevitably encounter errors in our analyses.\nThe essence of these errors lies in the inability of small samples to capture all the intricate nuances present within the population. While we can gain valuable insights and broad trends from our samples, the finer details and subtle variations within the population often elude our grasp. Thus, we find ourselves contending with sampling errors that can influence the accuracy of our conclusions."
  },
  {
    "objectID": "posts/2021-12-28-statistics-foundations-sample-error/index.html#building-on-previous-insights-recap-from-our-previous-post",
    "href": "posts/2021-12-28-statistics-foundations-sample-error/index.html#building-on-previous-insights-recap-from-our-previous-post",
    "title": "Statistics Foundations: Sampling error",
    "section": "",
    "text": "In our previous post on the Statistics Foundations series, we highlighted the potency of statistics as a valuable tool for further understanding issues of interest through data. To do so, we would ideally want to study the whole population, which represents the complete collection of entities affected by the issue under investigation. However, in most cases, obtaining data for every entity within this population is simply unfeasible due to constraints such as cost and logistics or even impossible. Consequently, we employ a strategy of working with samples—subsets of this population that are randomly selected in a manner ensuring that every entity has an equal probability of being selected.\nThese samples, though more manageable in size, serve as our window into the broader population, enabling us to draw conclusions and glean insights about the population—a process known as inference. However, it’s important to acknowledge that working with samples introduces a critical challenge: the inherent limitations stemming from their smaller size in comparison to the population. As a consequence, we inevitably encounter errors in our analyses.\nThe essence of these errors lies in the inability of small samples to capture all the intricate nuances present within the population. While we can gain valuable insights and broad trends from our samples, the finer details and subtle variations within the population often elude our grasp. Thus, we find ourselves contending with sampling errors that can influence the accuracy of our conclusions."
  },
  {
    "objectID": "posts/2021-12-28-statistics-foundations-sample-error/index.html#examining-sampling-errors-in-data-summarization-the-case-of-the-mean",
    "href": "posts/2021-12-28-statistics-foundations-sample-error/index.html#examining-sampling-errors-in-data-summarization-the-case-of-the-mean",
    "title": "Statistics Foundations: Sampling error",
    "section": "Examining Sampling Errors in Data Summarization: The Case of the Mean",
    "text": "Examining Sampling Errors in Data Summarization: The Case of the Mean\nAt the core of statistical analysis lies the foundational task of data summarization—a process that condenses data into a concise and understandable format. This fundamental procedure yields a clear and easily comprehensible overview of the data, facilitating a straightforward grasp of its essential characteristics.\nAmong these essential characteristics, two prominently stand out: central tendency and variability. Central tendency relates to the value around which the different data points cluster around. Conversely, variability quantifies the extent to which data points deviate from this central point, providing insights into the dispersion or spread of data relative to its central location. For instance, the mean serves as an example of a central tendency measure, while the standard deviation exemplifies a variability measure.\nTo visually illustrate the impact of sampling error, we will once again utilize the Kaggle dataset used in our previous post. This dataset contains information on 2,000 supermarket customers, including their age, annual income, and education level. For the purposes of this analysis, we will assume that this dataset represents our entire customer population.\nLet’s envision a scenario: our objective is to rapidly glean insights into the annual income of our customers. One straightforward strategy to achieve this is by computing the mean income, which furnishes us with a succinct metric representing the central tendency around which the majority of our customers’ annual incomes gravitate. In this endeavor, we observe that the mean annual income stands at a noteworthy $120,950. In essence, this figure signifies that the bulk of our customers possess incomes clustered around this point.\n\n\n\n\n\nFigure 1: Customer annual income distribution (thousands, $)\n\n\n\n\n\nSampling 20 customers and calculating their annual income mean\nIn this hypothetical case, we possess information about the sample. Consequently, we can obtain information about our population without any error by directly observing it. Therefore, now we know that our population has an average annual income of $120,950. However, in real-life scenarios, and as previously said, obtaining data for the whole population may be unfeasible or even not possible. For this reason, we will assume that we extract a random sample of 20 customers and compute the mean annual income from this sample.\n\n\n\n\n\nFigure 2: Customer annual income distribution for our sample with 20 observations (thousands, $)\n\n\n\n\nAs observed, the mean value within this sample diverges from that of the broader population. Specifically, the mean for this sample stands at $137,320, contrasting with the population mean of $120,950. This difference amounts to $16,370, and it encapsulates what we commonly refer to as “error.” Notably, in this instance, we possess knowledge about the population, allowing us to discern this difference.\nFor this reason, the terminology we use to describe the metrics summarizing the data characteristics varies depending on whether they are computed within the population or a sample. In the former case, they are referred to as parameters, whereas in the latter, they are known as statistics.\n\n\nRandomness and sampling: Extracting several means of 20 observations\nMoreover, it’s crucial to note that this sample was derived through a process of random selection. In other words, we randomly picked 20 customers from our population, ensuring that each customer had an equal likelihood of being included. This randomness implies that if we were to generate another sample of 20 customers, it would be improbable for this new sample to mirror the exact composition of the previous one or yield the same mean.\nFigure 3 illustrates the annual income distribution of various samples, each consisting of 20 individuals randomly selected from our initial population (including the sample we previously examined). It becomes evident that the distribution undergoes fluctuations across these diverse samples. Consequently, this variability gives rise to a spectrum of computed means, ranging from as low as $118,125 to as high as $136,800.\n\n\n\n\n\nFigure 3: Customer annual income distribution for different samples of 20 customers (thousands, $)\n\n\n\n\n\n\nDigging deeper: Exploring mean customer annual income with 10,000 different 20 samples\nTo deepen our comprehension of the variance in computed means, we embark on a more extensive analysis by replicating the previous procedure but on a much larger scale: generating precisely 10,000 samples, each composed of 20 individuals. For every one of these 10,000 samples, we compute the mean annual income. The resulting distribution of these 10,000 means, each originating from distinct samples of 20 individuals randomly selected from our complete population, is visually represented in Figure 4 through a histogram.\n\n\n\n\n\nFigure 4: Average income distribution of 10,000 samples of 20 customers (thousands, $)\n\n\n\n\n\nFigure 4 reveals significant insights. Notably, there is a substantial variation in the computed average annual incomes across the various samples, spanning an extensive spectrum from $94,182 to $161,165. This disparity translates into an error range spanning from -$26,768 to $40,215 in contrast with the population’s mean.\nNonetheless, an intriguing revelation emerges from this analysis. Despite the marked variability in sample means, the overall average of these mean annual incomes, drawn from distinct samples, precisely mirrors the population average. This observation means that the average incomes for the different samples consistently cluster around this point.\nMoreover, it is worth noting that the distribution of annual income means extracted from these various samples adheres to a bell-shaped pattern, commonly known as a normal distribution. This pattern signifies that as we move farther away from the population average, the number of observations gradually diminishes.\nTaken together, this implies that, in most instances, the mean annual income estimated from our sample tends to be closer rather than farther away from the population’s mean annual income. Nevertheless, it’s important to acknowledge that there are still situations where significant deviations from the sample mean can occur. The key concern here lies in the fact that if we lacked information about the population and solely possessed a sample with an annual income mean of $161,165, we might mistakenly conclude that, on average, our customers are wealthier than they actually are.\n\n\nIncreasing sample size and analyzing mean annual income distribution of 10,000 samples\nAs previously mentioned, small samples encounter challenges in capturing the subtleties present within the population. Consequently, the larger the sample size, the more effectively we can apprehend these nuances. To illustrate this, we investigate how the variance of computed means changes when we collect samples of 150 customers, as opposed to the previous samples of 20 customers.\nOnce again, we generate 10,000 samples, each containing 150 customers, and calculate the mean annual income for each of these samples. Subsequently, we visualize the distribution of these mean annual incomes for these larger samples by creating a histogram.\nFigure 5 provides a visual comparison between the distributions of means computed using 10,000 samples, each with 20 observations, and another set of samples, each comprising 150 observations.\n\n\n\n\n\nFigure 5: Average income distribution of 10,000 samples of 20 customers vs 10,000 samples of 150 customers (thousands, $)\n\n\n\n\nFigure 5 provides insights akin to those observed with 20 observations: the distribution of means exhibits a bell-shaped pattern, with the average closely approximating the population mean. However, a significant distinction emerges: the range within which sample means deviate from the overall mean, equivalent to the population average, is notably narrower. In essence, the variability is considerably reduced, indicating that the margin for error when using samples of 150 observations is substantially smaller than that with samples of 20.\nIn this scenario, the distribution of means spans from $109,374 to $132,064, resulting in an error range of -$11,576 to $11,114 relative to the population mean. This range is significantly tighter compared to the error range obtained from samples of 20, where the deviation ranged from -$26,768 to $40,215."
  },
  {
    "objectID": "posts/2021-12-28-statistics-foundations-sample-error/index.html#measuring-the-sampling-error",
    "href": "posts/2021-12-28-statistics-foundations-sample-error/index.html#measuring-the-sampling-error",
    "title": "Statistics Foundations: Sampling error",
    "section": "Measuring the sampling error",
    "text": "Measuring the sampling error\nThrough the repetitive extraction of samples of consistent size from a given population, as demonstrated in our previous examples (with both 20 and 150-sized samples), we gain valuable insights into the potential magnitude of errors associated with samples of a particular size.\nAs we’ve witnessed, the average of multiple means calculated from samples of identical size closely aligns with, or is essentially identical to, the true mean of the population. Consequently, the spread or dispersion of these computed means from this point provides a measure of the magnitude of the sampling error. Put simply, the variability in the mean derived from multiple samples of equal size offers a quantifiable measure of the magnitude of the sampling error for samples of that particular size. This measure is commonly known as the standard error of the mean (which we will abbreviate as SE).\nMathematically, we can express this as the standard error of the mean being equal to the standard deviation of the means of the different samples. Specifically, we prefer using the standard deviation rather than the variance because the former has the same units as the mean, while the latter has squared units. For instance, in the case of annual income, the units for variance would be in dollars squared (\\(\\$^2\\)), while for the standard error, it’s just in dollars ($). In other words:\n\\(\\sqrt{Var(\\bar{X})} = SE\\)\nThis expression can be translated into the following form:\n\\(\\frac{\\sigma}{\\sqrt{n}} = SE\\)\nHere, \\(σ\\) represents the population standard deviation and \\(n\\) is the sample size. Establishing an inverse relationship between the standard error and the sample size: as the sample size increases, the standard error decreases. This principle aligns with our intuitive understanding, as seen in the previous post for the statistics foundations series, and as visually depicted in Figure 5.\n\n\n\n\n\n\nStandard Error Derivation\n\n\n\n\n\nLet’s recall that the mean of any variable is equal to the sum of the values of each observation of that variable divided by the total number of observations (which equals our sample size): \\(\\frac{1}{n}\\sum_{i=1}^{n}X_i\\). Therefore, we can rewrite the previous formula as follows:\n\\(\\sqrt{\\text{Var}\\left(\\frac{1}{n}\\sum_{i=1}^{n}X_i\\right)} = SE\\)\nWe also know that the variance of a random variable multiplied by a constant “a” is equal to the variance of that variable multiplied by the square of that constant, i.e., \\(Var(aR) = a^2Var(R)\\), where \\(a\\) is a constant, and \\(R\\) is a random variable. This means that:\n\\(\\sqrt{\\frac{1}{n^2}\\text{Var}\\left(\\sum_{i=1}^{n}X_i\\right)} = SE\\)\nAdditionally, when dealing with a set of pairwise independent random variables (where the variability in one doesn’t depend on the others, as in our case), the variance of their sum is equal to the sum of their individual variances, i.e., \\(\\text{Var}[R_1 + R_2 + \\cdots + R_n]\\) \\(=\\) \\(\\text{Var}[R_1] + \\text{Var}[R_2] + \\cdots + \\text{Var}[R_n]\\), where \\(R_1, R_2,…, R_n\\) are pairwise independent random variables. This allows us to rewrite the formula for SE as:\n\\(\\sqrt{\\frac{1}{n^{2}}\\sum_{i = 1}^{n}Var(X_i)} = SE\\)\nLet’s remember that our individual variables, denoted as \\(X_i\\), come from a population with variance equal to \\(\\sigma^2\\). So, our formula becomes:\n\\(\\sqrt{\\frac{1}{n^{2}}\\sum_{i = 1}^{n}\\sigma^2} = SE\\)\nSince we’re summing up \\(n\\) identical values, we can simplify further:\n\\(\\sqrt{\\frac{1}{n^{2}}n\\sigma^2} = SE\\)\nUltimately, this can be further simplified to:\n\\(\\frac{\\sigma}{\\sqrt{n}} = SE\\)\n\n\n\nApplying these formulas, we can now calculate the Standard Error of the mean for sample sizes of 20 and 150. When we compute the standard deviation of the means obtained from multiple samples of 20 customers, we obtain a value of 8.39. Conversely, for samples of 150 customers, we obtained a value of 3.01, which is approximately three times smaller in terms of standard error.\nAlternatively, we can utilize the formula that links the standard error to the population’s standard deviation and the sample size, represented as $\\frac{\\sigma}{\\sqrt{n}}$. Given our population’s standard deviation for annual income is 38.11, dividing this by \\(\\sqrt{20}\\) yields a value of 8.52 for a sample size of 20, while dividing it by \\(\\sqrt{150}\\) results in a value of 3.11 for a sample size of 150.\nHowever, it’s important to note that there are disparities between the results obtained from these two approaches. This is because the first formula relies on a finite number of samples (10,000 in this case), and to obtain equivalent values, the number of samples would need to tend towards infinity, meaning a significantly larger amount of samples."
  },
  {
    "objectID": "posts/2021-12-28-statistics-foundations-sample-error/index.html#summary",
    "href": "posts/2021-12-28-statistics-foundations-sample-error/index.html#summary",
    "title": "Statistics Foundations: Sampling error",
    "section": "Summary",
    "text": "Summary\n\nSampling is necessary because obtaining data for the entire population is often impractical.\nThe use of samples introduces the challenge of sampling errors.\nSampling errors arise because small samples cannot capture all the nuances present in the population.\nThis leads to variations in common measures like the mean between the sample and the population.\nTo illustrate this, we simulated the extraction of 10,000 samples of the same size from our exemplary population and observed that:\n\nThe mean from different samples exhibits variability.\nDespite this variability, the average of mean values from various samples tends to closely align with the population average.\nA normal distribution pattern is evident in the distribution of annual income means from different samples, indicating that samples with means close to the population mean are more likely.\nLarger sample sizes reduce the standard error and yield more accurate estimates, as they better capture the population’s intricacies.\n\nWhen extracting multiple samples of the same size from a population and calculating their means, the average of these sample means corresponds to the population mean. This allows us to quantify the degree of error associated with that sample size by measuring their variability, i.e., how much they deviate from the population mean.\nStandard Error (SE) is mathematically linked to the population’s standard deviation and sample size.\nIncreasing the sample size results in a smaller standard error.\nSE serves as a valuable tool for quantifying the precision of sample-based estimates and is essential for robust statistical analysis.\n\n\n\nCode\n## Reading the \"population\" and visualizing it\nlibrary(gganimate)\nlibrary(tidyverse)\nlibrary(ggthemes)\n\n#Read customer data\ncustomer_data &lt;- read.csv(\"assets/customer.csv\")\ncustomer_data$Income &lt;- customer_data$Income/1000\n#Compute the average and standard deviation of the income\naverage_income &lt;- mean(customer_data$Income)\n\nggplot(customer_data, aes(x = Income)) +\n  geom_histogram(aes(y = after_stat(count / sum(count)*100)), fill = \"steelblue\") +\n  geom_vline(xintercept = average_income, color = \"#B44655\", linetype = \"dashed\", size = 0.75) +\n  labs(\n    x = \"Annual Income (thousands, $)\",\n    y = \"Frequency\"\n  ) +\n  theme_fivethirtyeight() +\n  theme(plot.title = element_text(hjust = 0),\n    axis.title.x = element_text(hjust = 0.5),\n    axis.title.y = element_text(hjust = 0.5),\n    plot.caption = element_text(hjust = 0)) +\n    scale_y_continuous(labels = scales::percent_format(scale = 1)) +\n   annotate(\"text\", x = average_income * 1.25, y = 13, label = paste0(\"Mean: \", round(average_income, 2))) \n  \n## Sampling 20 customers and calculating their annual income mean + visualizing their distribution\n\nset.seed(150)\ncustomer_data_sample &lt;- customer_data[sample(nrow(customer_data), 20), ]\n\n#Compute the average and standard deviation of the income\naverage_income &lt;- mean(customer_data_sample$Income)\n\nggplot(customer_data_sample, aes(x = Income)) +\n  geom_histogram(aes(y = after_stat(count / sum(count) * 100)), fill = \"steelblue\") +\n  geom_vline(xintercept = average_income, color = \"#B44655\", linetype = \"dashed\", size = 0.75) +\n  labs(\n    x = \"Annual Income (thousands, $)\",\n    y = \"Frequency\"\n  ) +\n  theme_fivethirtyeight() +\n  theme(plot.title = element_text(hjust = 0),\n    axis.title.x = element_text(hjust = 0.5),\n    axis.title.y = element_text(hjust = 0.5),\n    plot.caption = element_text(hjust = 0)) +\n    scale_y_continuous(labels = scales::percent_format(scale = 1)) +\n   annotate(\"text\", x = average_income * 1.15, y = 13, label = paste0(\"Mean: \", round(average_income, 2))) \n   \n ## Extracting several 20 customers and calculating their annual income mean + visualizing their distribution\n \n customer_data_samples &lt;- customer_data_sample\ncustomer_data_samples$Average_Sample &lt;- \"Sample 1\"\n\nseeds &lt;- seq(300, 5500, length.out = 8)\n\ni &lt;- 2\nfor(seed in seeds) {\n    \n    set.seed(seed)\n    customer_data_sample &lt;- customer_data[sample(nrow(customer_data), 20),]\n    row.names(customer_data_sample) &lt;- NULL\n    average_income &lt;- round(mean(customer_data_sample$Income), 2)\n    customer_data_sample$Average_Sample &lt;- paste0(\"Sample \", i)\n    customer_data_samples &lt;- rbind(customer_data_samples, customer_data_sample)\n    i &lt;- i + 1\n}\n\n\ndata_income_average &lt;- customer_data_samples %&gt;%\n  summarise(meanIncome = mean(Income), .by = Average_Sample)\n\n\np &lt;- ggplot(customer_data_samples, aes(x = Income, fill = Average_Sample)) +\n  geom_histogram(aes(y = after_stat(density*width))) +\n  geom_vline(\n    data = data_income_average, aes(xintercept = meanIncome),\n    color = \"#B44655\", linetype = \"dashed\", size = 0.75) +\n  geom_text(data = data_income_average, aes(x = meanIncome * 1.25, y = 0.23, label = paste0(\"Mean: \", round(meanIncome, 2)))) +\n  labs(\n    title = \"Annual Income Distribution\",\n    x = \"Annual Income (thousands, $)\",\n    y = \"Frequency\"\n  ) +\n  theme_fivethirtyeight() +\n  scale_fill_economist() +\n  scale_y_continuous(labels = scales::percent_format())  +\n  theme(plot.title = element_text(hjust = 0.95, size = 11),\n    axis.title.x = element_text(hjust = 0.5),\n    axis.title.y = element_text(hjust = 0.5),\n    plot.caption = element_text(hjust = 0), legend.position=\"none\") +\n  transition_states(Average_Sample, transition_length = 1.25, state_length = 2) +\n  enter_fade() +\n  exit_fade() \n\np &lt;- p + labs(title = \"{closest_state}\")\n\n# Render the animation\nanim &lt;- animate(p, nframes = 180, duration = 20)\nanim\n\n## Extracting 10,000 samples of 20 observations and calculate their mean + visualize the distribution of the means\nset.seed(3)\n# Create an empty numeric vector of length 10000 named 'sample20_means'\nsample20_means &lt;- numeric(length = 10000)\n\n# Generate a for loop iterating 10000 times\n# For each iteration, the variable 'i' takes the value of the current iteration\nfor (i in 1:10000) {\n  # Generate a sample of 20 observations from the Income variable\n  sample_population &lt;- sample(customer_data$Income, 20)\n  # Calculate the mean of the sample and store it in the 'i' position of the 'sample_means' vector\n  sample20_means[i] &lt;- mean(sample_population)\n}\n\naverage_income &lt;- round(mean(sample20_means), 2)\nsample_means &lt;- data.frame(Income = sample20_means)\n\n\nggplot(sample_means, aes(x = Income)) +\n  geom_histogram(aes(y = after_stat(count / sum(count)*100)), fill = \"steelblue\") +\n  geom_vline(xintercept = average_income, color = \"#B44655\", linetype = \"dashed\", size = 0.75) +\n  labs(\n    x = \"Annual Income (thousands, $)\",\n    y = \"Frequency\"\n  ) +\n  theme_fivethirtyeight() +\n  theme(plot.title = element_text(hjust = 0),\n    axis.title.x = element_text(hjust = 0.5),\n    axis.title.y = element_text(hjust = 0.5),\n    plot.caption = element_text(hjust = 0)) +\n    scale_y_continuous(labels = scales::percent_format(scale = 1)) +\n   annotate(\"text\", x = average_income * 1.05, y = 9, label = paste0(\"Mean: \", round(average_income, 2))) \n\n## Extracting 10,000 samples of 150 observations and calculate their mean + visualize the distribution of the means\n\nset.seed(1500)\n# Create an empty numeric vector of length 10000 named 'sample_means'\nsample_means &lt;- numeric(length = 10000)\n\n# Generate a for loop iterating 10000 times\n# For each iteration, the variable 'i' takes the value of the current iteration\nfor (i in 1:10000) {\n  # Generate a sample of 150 observations from the Income variable\n  sample_population &lt;- sample(customer_data$Income, 150)\n  # Calculate the mean of the sample and store it in the 'i' position of the 'sample_means' vector\n  sample_means[i] &lt;- mean(sample_population)\n}\n\naverage_income &lt;- round(mean(sample_means), 2)\nsample_means_20 &lt;- data.frame(Income = sample20_means)\nsample_means_20$Observations &lt;- \"Samples of 20 Observations\"\nsample_means_150 &lt;- data.frame(Income = sample_means)\nsample_means_150$Observations &lt;- \"Samples of 150 Observations\"\nsample_means &lt;- rbind(sample_means_20, sample_means_150)\n\n\ndata_income_average &lt;- sample_means %&gt;%\n  summarise(meanIncome = mean(Income), .by = Observations)\n\n\np &lt;- ggplot(sample_means, aes(x = Income, fill = Observations)) +\n  geom_histogram(aes(y = after_stat(density*width))) +\n  geom_vline(\n    data = data_income_average, aes(xintercept = meanIncome),\n    color = \"#B44655\", linetype = \"dashed\", size = 0.75) +\n  geom_text(data = data_income_average, aes(x = average_income * 1.08, y = 0.23, label = paste0(\"Mean: \", round(meanIncome, 2)))) +\n  labs(\n    title = \"Annual Income Distribution\",\n    x = \"Annual Income (thousands, $)\",\n    y = \"Frequency\"\n  ) +\n  theme_fivethirtyeight() +\n  scale_fill_economist() +\n  scale_y_continuous(labels = scales::percent_format())  +\n  theme(plot.title = element_text(hjust = 0.95, size = 11),\n    axis.title.x = element_text(hjust = 0.5),\n    axis.title.y = element_text(hjust = 0.5),\n    plot.caption = element_text(hjust = 0), legend.position=\"none\") +\n  transition_states(Observations, transition_length = 1.25, state_length = 2) +\n  enter_fade() +\n  exit_fade() \n\np &lt;- p + labs(title = \"{closest_state}\")\n\n# Render the animation\nanim &lt;- animate(p, nframes = 180, duration = 10)\nanim"
  }
]